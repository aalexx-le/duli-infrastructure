# {{ target_namespace | upper }} ENVIRONMENT - CONNECTION INFORMATION
# Generated: {{ ansible_date_time.iso8601 }}

[environment]
namespace = {{ target_namespace }}
domain_suffix = {{ domain_base }}

[backend]
{% if target_namespace == 'prod' %}
url = https://api.{{ domain_base }}
{% else %}
url = https://api-{{ target_namespace }}.{{ domain_base }}
{% endif %}

[ai-service]
{% if target_namespace == 'prod' %}
url = https://ai.{{ domain_base }}
{% else %}
url = https://ai-{{ target_namespace }}.{{ domain_base }}
{% endif %}

[scheduler]
{% if target_namespace == 'prod' %}
url = https://n8n.{{ domain_base }}
{% else %}
url = https://n8n-{{ target_namespace }}.{{ domain_base }}
{% endif %}

[keycloak]
{% if target_namespace == 'prod' %}
url = https://auth.{{ domain_base }}
admin_console = https://auth.{{ domain_base }}/admin/master/console/
{% else %}
url = https://auth-{{ target_namespace }}.{{ domain_base }}
admin_console = https://auth-{{ target_namespace }}.{{ domain_base }}/admin/master/console/
{% endif %}
admin_username = {{ keycloak_admin_user }}
admin_password = {{ keycloak_admin_pass }}

[db]
{% if target_namespace == 'prod' %}
host = db.{{ domain_base }}
port = 5433
{% else %}
host = db-{{ target_namespace }}.{{ domain_base }}
port = 5432
{% endif %}
username = {{ postgres_user }}
password = {{ postgres_pass }}
database = {{ postgres_db }}
{% if target_namespace == 'prod' %}
connection_url = postgresql://{{ postgres_user }}:{{ postgres_pass }}@db.{{ domain_base }}:5433/{{ postgres_db }}
{% else %}
connection_url = postgresql://{{ postgres_user }}:{{ postgres_pass }}@db-{{ target_namespace }}.{{ domain_base }}:5432/{{ postgres_db }}
{% endif %}

[redis]
{% if target_namespace == 'prod' %}
host = redis.{{ domain_base }}
port = 6380
{% else %}
host = redis-{{ target_namespace }}.{{ domain_base }}
port = 6379
{% endif %}
password = {{ redis_password }}
{% if target_namespace == 'prod' %}
connection_url = redis://:{{ redis_password }}@redis.{{ domain_base }}:6380
{% else %}
connection_url = redis://:{{ redis_password }}@redis-{{ target_namespace }}.{{ domain_base }}:6379
{% endif %}

[queue]
{% if target_namespace == 'prod' %}
host = mq.{{ domain_base }}
port = 5673
management_url = https://queue.{{ domain_base }}
connection_url = amqp://{{ rabbitmq_user }}:{{ rabbitmq_pass }}@mq.{{ domain_base }}:5673
{% else %}
host = mq-{{ target_namespace }}.{{ domain_base }}
port = 5672
management_url = https://queue-{{ target_namespace }}.{{ domain_base }}
connection_url = amqp://{{ rabbitmq_user }}:{{ rabbitmq_pass }}@mq-{{ target_namespace }}.{{ domain_base }}:5672
{% endif %}
username = {{ rabbitmq_user }}
password = {{ rabbitmq_pass }}

[argocd]
url = https://argocd.{{ domain_base }}
admin_username = {{ argocd_admin_user }}
admin_password = {{ argocd_admin_pass }}

[rancher]
url = https://rancher.{{ domain_base }}
admin_username = {{ rancher_admin_user }}
admin_password = {{ rancher_admin_pass }}
