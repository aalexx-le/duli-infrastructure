---
# ============================================================================
# GITOPS TOOLS - CONFIGURATION
# ============================================================================
# Configuration for GitOps tools and ArgoCD applications

# Git Repository for ArgoCD Applications
# Used by: ArgoCD application templates (*.yml.j2)
git_repo_url: "https://github.com/aalexx-le/duli-infrastructure.git"
git_branch: "main"

# ============================================================================
# DOMAIN CONFIGURATION
# ============================================================================
# Domain settings for duli.one with Cloudflare integration.
# All services are exposed via ingress-nginx with TLS termination.

# Base domain
domain_base: "duli.one"

# Subdomain assignments
domain_api: "api.{{ domain_base }}"           # Backend API service
domain_ai: "ai.{{ domain_base }}"             # AI service
domain_scheduler: "n8n.{{ domain_base }}"     # n8n scheduler
domain_auth: "auth.{{ domain_base }}"         # Keycloak authentication
domain_argocd: "argocd.{{ domain_base }}"     # ArgoCD UI
domain_rancher: "rancher.{{ domain_base }}"   # Rancher UI
domain_grafana: "grafana.{{ domain_base }}"   # Grafana monitoring UI

# TLS Configuration
# ClusterIssuer to use for certificate generation
# Options: letsencrypt-staging (testing), letsencrypt-prod (production)
tls_cluster_issuer: "letsencrypt-prod"

# Wildcard certificate secret name (shared across services)
tls_wildcard_secret: "duli-one-wildcard-tls"

# Cloudflare Configuration
cloudflare_email: "admin@duli.one"
# API token stored in vault: vault_cloudflare_api_token

# ============================================================================
# GITOPS TOOLS - HELM CHART VERSIONS
# ============================================================================
# Chart versions for GitOps tools deployed via Helm (not kubespray-managed).
# All deployed by install_infrastructures.yml playbook.
#
# NOTE: ArgoCD is now deployed by kubespray (see kubernetes-runtime.yml)
# Only Cert-Manager and Rancher remain as Helm-deployed tools

# Cert-Manager - Certificate Management
# Reference: https://github.com/cert-manager/cert-manager/releases
# Used by: install_infrastructures.yml
helm_cert_manager_chart_version: "1.16.0"  # App version: v1.16.0, K8s 1.27+

# Rancher - Kubernetes Management Platform
# Reference: https://github.com/rancher/rancher/releases
# Used by: install_infrastructures.yml
helm_rancher_chart_version: "2.13.0"  # App version: v2.13.0, K8s 1.32+

# ============================================================================
# GITOPS TOOLS - SERVICE TYPES
# ============================================================================
# Service type configuration for ArgoCD and Rancher.
# With ingress-nginx enabled, services use ClusterIP and are accessed via Ingress.

# ArgoCD service type: ClusterIP (accessed via Ingress at argocd.duli.one)
argocd_service_type: ClusterIP

# Rancher service type: ClusterIP (accessed via Ingress at rancher.duli.one)
rancher_service_type: ClusterIP

# Rancher hostname for ingress
rancher_hostname: "rancher.{{ domain_base }}"

# ============================================================================
# MONITORING STACK - CONFIGURATION
# ============================================================================
# Shared monitoring infrastructure deployed to 'monitoring' namespace.
# Collects metrics and logs from ALL namespaces (staging, prod, etc.)

# Prometheus Stack (kube-prometheus-stack chart v80.6.0)
# Includes: Prometheus, Grafana, Alertmanager, node-exporter, kube-state-metrics
monitoring_prometheus_stack_enabled: true

# Loki Stack (grafana/loki chart v6.49.0)
# Includes: Loki (log aggregation), MinIO (object storage)
monitoring_loki_enabled: true

# Grafana hostname for ingress
grafana_hostname: "grafana.{{ domain_base }}"
