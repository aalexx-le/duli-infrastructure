---
# ============================================================================
# DIGITALOCEAN API TOKEN SECRET
# ============================================================================
# Secret containing DigitalOcean API token for DNS-01 challenge.
#
# This secret is used by cert-manager to create/delete DNS TXT records
# for Let's Encrypt domain validation.
#
# To create the DigitalOcean API Token:
# 1. Go to https://cloud.digitalocean.com/account/api/tokens
# 2. Create a new Personal Access Token with "Write" scope
# 3. Store the token in Ansible Vault as vault_do_dns_token
#
# Required permissions: DNS (Read/Write)
# ============================================================================

{{- if .Values.digitalocean.createSecret }}
apiVersion: v1
kind: Secret
metadata:
  name: digitalocean-dns-token
  namespace: cert-manager
type: Opaque
stringData:
  access-token: {{ .Values.digitalocean.accessToken | quote }}
{{- end }}
